<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>CSS - Exercício 02</title>
    <style>
        button {
            display: block;
            margin: auto;
        }

        div {
            background-image: url("stickman.png");
            background-size: 50px 75px;
            width: 50px;
            height: 75px;
            position: absolute;
        }
    </style>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript">
        /* Retorna true ou false caso duas pessoas estejam sobre outro na listaItens */
        function podeInserir(listaItens, pos) {
            for (const v of listaItens) {
                if (pos.top >= v.top - 75 && pos.top <= v.top + 75 && pos.left >= v.left - 50 && pos.left <= v.left + 50) {
                    return false;
                }
            }
            return true;
        }

        /* Função que preenche a página com pessoas */
        function preencherPagina(numeroMaxPessoasAdicionar) {
            let numPessoas = Math.floor(Math.random() * (numeroMaxPessoasAdicionar - 2 + 1)) + 2;
            let listaItens = [];
            while (listaItens.length < numPessoas) {
                let posicao = {
                    top: Math.max(Math.random() * Math.max(window.innerHeight - 75), 40),
                    left: Math.max(Math.random() * window.innerWidth - 50, 0)
                };

                if (podeInserir(listaItens, posicao)) {
                    listaItens.push(posicao);
                }
            }
            for (let i = 0; i < listaItens.length; i++) {
                let div = $("<div>");
                div.css({
                    "left": listaItens[i].left,
                    "top": listaItens[i].top
                });
                $("main").append(div);
            }
        }


        $(document).ready(function () {
            preencherPagina(30);
            var quantidadeDeDivs = $("div").length
            var qtd = 0
            var k = 0
            $("button").click(function () {
                var quantity = quantidadeDeDivs
                quantidadeDeDivs = Math.ceil(quantidadeDeDivs / 2)
                if (quantidadeDeDivs >= 1) {
                    var n = k
                    var i = n
                    let number = quantity - quantidadeDeDivs
                    qtd = qtd + number
                    for (i; i < qtd; i++) {
                        $("div").eq(i).hide()
                        k = k + 1
                    }
                }
            })
            // Preencha aqui o código malévolo da luva do infinito de Thanos!!!

        });
    </script>
</head>

<body>
    <nav>
        <button>Estalar os dedos!</button>
    </nav>
    <main>

    </main>
</body>

</html>